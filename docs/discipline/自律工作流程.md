# 🎯 自律工作流程 - 完整指南

## 📋 核心原则

**代码修改 = 文档更新**
**两者不可分割，必须同时完成**

---

## 🔄 完整工作循环

### 阶段1: 开始工作前（1分钟）

```bash
# 1. 阅读自律指南
cat /home/zcy/alpha006_20251223/每次工作必读.md

# 2. 查看当前状态
python3 scripts/verify_docs.py

# 3. 理解要修改的文件
head -5 [文件路径]
cat [文件夹]/ARCHITECTURE.md
```

**必须确认**:
- ✅ 所有文档当前一致
- ✅ 理解要修改的文件
- ✅ 知道需要更新哪些文档

---

### 阶段2: 修改代码（任意时长）

**修改代码时**:
1. 按需求修改代码逻辑
2. **立即**更新文件头部注释
3. **立即**更新文件夹 ARCHITECTURE.md
4. **立即**检查根目录 README（如有架构变更）
5. **立即**检查策略文档（如涉及策略）

**关键**: 不要等！修改完代码立即更新文档

---

### 阶段3: 验证完成（2分钟）

```bash
# 1. 运行自动验证
python3 scripts/verify_docs.py

# 2. 手动检查关键文件
head -5 [修改的文件]
cat [修改文件所在文件夹]/ARCHITECTURE.md

# 3. 确认一致性
# - 注释中的依赖 = 实际依赖
# - 架构中的职责 = 实际功能
# - 文档中的描述 = 实际实现
```

**必须全部通过**:
- ✅ 验证脚本显示所有✅
- ✅ 注释准确描述代码
- ✅ 架构说明准确描述文件夹
- ✅ 所有文档相互一致

---

## 🎓 每日工作模板

### 上午（开始工作）

```markdown
## 开始工作 - [日期]

### 1. 环境检查
- [ ] 运行验证脚本
- [ ] 确认所有文档一致
- [ ] 查看昨天的工作

### 2. 任务规划
- 任务: [描述]
- 修改文件: [列表]
- 需要更新的文档: [列表]

### 3. 开始执行
- 按阶段2执行
- 随时更新文档
```

### 下午（结束工作）

```markdown
## 结束工作 - [日期]

### 1. 完整验证
- [ ] 运行验证脚本
- [ ] 检查所有修改的文件
- [ ] 确认文档一致性

### 2. 工作记录
- 完成任务: [描述]
- 修改文件: [列表]
- 更新文档: [列表]
- 验证结果: [通过/失败]

### 3. 明日计划
- [ ] 待办事项
- [ ] 注意事项
```

---

## ⚡ 快速参考

### 必须更新的文档

**修改任何文件后**:
1. ✅ 文件头部注释
2. ✅ 文件夹 ARCHITECTURE.md

**修改架构后**:
3. ✅ 根目录 README.md

**修改策略后**:
4. ✅ 策略相关文档

### 必须运行的命令

**每次工作后**:
```bash
python3 scripts/verify_docs.py
```

**查看文件**:
```bash
head -5 [文件路径]
cat [文件夹]/ARCHITECTURE.md
```

---

## 🚨 紧急情况处理

### 发现文档未更新

**立即执行**:
```bash
# 1. 停止当前工作
# 2. 查找所有未更新的文件
python3 scripts/verify_docs.py

# 3. 按错误提示逐一修复
# 4. 重新验证直到通过
python3 scripts/verify_docs.py
```

### 文档不一致

**立即执行**:
```bash
# 1. 查看相关文档
cat [文件路径]
cat [文件夹]/ARCHITECTURE.md
cat README.md

# 2. 找出不一致的地方
# 3. 以代码为准，更新文档
# 4. 验证一致性
```

---

## 📊 进度追踪

### 每周检查

```bash
# 周一: 检查上周工作
python3 scripts/verify_docs.py

# 周五: 完整验证
python3 scripts/verify_docs.py
```

### 每月检查

```bash
# 1. 完整项目验证
python3 scripts/verify_docs.py

# 2. 统计文档数量
find . -name "ARCHITECTURE.md" | wc -l
find . -name "*.py" -exec head -5 {} \; | grep -c "文件input"

# 3. 生成报告
cat 文档规范完成报告.txt
```

---

## 💡 习惯养成

### 第1周: 强制阶段
- 每次修改代码后，强制暂停
- 必须更新文档才能继续
- 使用检查清单逐项打勾

### 第2周: 适应阶段
- 开始自动更新文档
- 偶尔需要提醒
- 验证脚本成为习惯

### 第3周: 自动阶段
- 文档更新成为自然动作
- 无需思考就能完成
- 验证通过成为常态

### 第4周: 本能阶段
- 代码修改 = 文档更新
- 两者不可分割
- 成为工作本能

---

## 🎯 成功标准

### 优秀表现
- ✅ 每次工作都运行验证脚本
- ✅ 文档和代码100%一致
- ✅ 无需他人提醒
- ✅ 成为自然习惯

### 失败表现
- ❌ 经常忘记更新文档
- ❌ 文档和代码不一致
- ❌ 需要他人提醒
- ❌ 视文档为负担

---

## 📚 所有相关文档

### 必读文档
1. `README.md` - 开发规范章节
2. `DEVELOPMENT_STANDARDS.md` - 详细规范
3. `MAINTENANCE_CHECKLIST.md` - 维护清单
4. `CLAUDE_CODE_DISCIPLINE.md` - 自律机制
5. `每次工作必读.md` - 每日必读
6. `自律工作流程.md` - 本文件

### 工具脚本
1. `scripts/verify_docs.py` - 自动验证

### 策略文档
1. `STRATEGY_GUIDE.md`
2. `QUICK_START.md`
3. `README_STRATEGY.md`
4. `PROJECT_UPDATE_20251231.md`

---

## 🏆 最终目标

**让文档更新成为代码修改的本能反应**

就像:
- 写完代码要保存
- 提交前要测试
- 修改后要更新文档

**这3件事同等重要，缺一不可！**

---

## ✅ 每日确认清单

### 开始工作前
- [ ] 阅读本文件（30秒）
- [ ] 运行验证脚本（30秒）
- [ ] 确认所有文档一致

### 工作中
- [ ] 修改代码
- [ ] 更新文件注释
- [ ] 更新文件夹架构
- [ ] 检查根目录README
- [ ] 检查策略文档

### 结束工作前
- [ ] 运行验证脚本
- [ ] 确认所有✅
- [ ] 记录工作日志

---

**记住**:
**没有更新文档的代码修改 = 没有完成**

**版本**: v1.0
**状态**: 强制执行
**最后更新**: 2025-12-31
