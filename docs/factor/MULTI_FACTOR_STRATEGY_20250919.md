# 多因子选股策略完整报告 - 20250919

## 📊 执行摘要

**执行日期**: 2025-12-29 23:56
**策略版本**: v1.0
**数据日期**: 20250919
**策略类型**: 三因子叠加（alpha_pluse + 行业标准化alpha_peg + cr_qfq）

---

## 🎯 策略核心逻辑

### 三层筛选架构

```
┌─────────────────────────────────────────────────────────────┐
│  基础层: alpha_pluse = 1  (量能突破信号)                    │
│  └─ 保留: 1,870只 (50.15% of 3,729)                         │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第一层: 行业标准化alpha_peg < 阈值 (估值性价比)            │
│  ├─ 优选策略: 前25% (< -0.0881) → 467只                     │
│  └─ 保守策略: 前10% (< -0.2170) → 181只                     │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│  第二层: cr_qfq > 阈值 (价格动量)                           │
│  ├─ 优选策略: 前25% (> 121.17) → 90只                       │
│  └─ 保守策略: 前10% (> 155.04) → 10只                       │
└─────────────────────────────────────────────────────────────┘
```

---

## 📈 因子详解

### 1. alpha_pluse (量能突破因子)

**定义**: 20日内成交量满足特定条件的天数计数

**计算规则**:
- 14日成交量均值: `vol_14_mean = mean(vol[-14:])`
- 条件: `vol ∈ [vol_14_mean × 1.4, vol_14_mean × 3.5]`
- 信号: 若20日内满足条件的天数 ∈ [2,4]，则 alpha_pluse = 1

**数据特征**:
- 有效样本: 3,729只
- 信号数量: 1,870只 (50.15%)
- 信号分布: 均匀（约50%个股符合）

**策略价值**:
- ✅ 捕捉量能异动，过滤无量僵尸股
- ✅ 避免过度交易（天数限制[2,4]）
- ✅ 基础筛选层，剔除8,729只中的4,859只

---

### 2. 行业标准化alpha_peg (估值性价比因子)

**定义**: 行业内PE/盈利增长率的Z-Score标准化

**计算规则**:
```
原始值: alpha_peg_raw = pe_ttm / dt_netprofit_yoy
Z-Score: (原始值 - 行业均值) / 行业标准差
```

**数据特征**:
- 有效样本: 3,729只 (100%)
- 均值: 0.000000 ✅
- 标准差: 0.9958 ≈ 1 ✅
- 取值范围: [-17.79, 13.70]

**分位数阈值**:
| 分位数 | 阈值 | 含义 | 策略意义 |
|--------|------|------|----------|
| 前10% | < -0.2213 | 极高性价比 | 强烈推荐 |
| 前25% | < -0.0881 | 高性价比 | 推荐 |
| 前50% | < 0.0260 | 中等偏上 | 可考虑 |
| 后25% | > 0.1013 | 低性价比 | 规避 |

**策略价值**:
- ✅ 行业中性化，消除行业偏差
- ✅ 横向跨行业比较公平
- ✅ 越低越好（高性价比）

---

### 3. cr_qfq (价格动量因子)

**定义**: CR价格动量指标，N=20，前复权

**计算来源**: stk_factor_pro表
- 基于: CLOSE / HIGH / LOW
- 周期: 20日
- 复权: 前复权

**数据特征**:
- 有效样本: 3,729只 (100%)
- 均值: 100.5653
- 标准差: 66.3835
- 取值范围: [0.00, 3140.90] ⚠️ 存在极端值

**分位数阈值**:
| 分位数 | 阈值 | 含义 | 策略意义 |
|--------|------|------|----------|
| 前10% | > 155.04 | 极强动量 | 强烈推荐 |
| 前25% | > 121.17 | 强动量 | 推荐 |
| 前50% | > 91.15 | 中等偏上 | 可考虑 |
| 后25% | < 67.98 | 弱动量 | 规避 |

**策略价值**:
- ✅ 捕捉价格趋势强度
- ✅ 追涨策略核心指标
- ✅ 越大越好（强动量）

---

## 🔬 因子独立性验证

### 相关性矩阵

```
                alpha_pluse  行业标准化alpha_peg  cr_qfq
alpha_pluse          1.0000          0.0133     -0.0162
行业标准化alpha_peg       0.0133          1.0000      0.0005
cr_qfq              -0.0162          0.0005      1.0000
```

### 解读

| 因子对 | 相关系数 | 强度 | 结论 |
|--------|----------|------|------|
| alpha_pluse vs alpha_peg | 0.0133 | 极弱 | ✅ 独立 |
| alpha_pluse vs cr_qfq | -0.0162 | 极弱 | ✅ 独立 |
| alpha_peg vs cr_qfq | 0.0005 | 极弱 | ✅ 独立 |

**策略意义**:
- ✅ 三因子代表完全不同的市场维度
- ✅ 不存在因子冗余
- ✅ 叠加效果最佳
- ✅ 信息互补性强

---

## 🎯 策略执行结果

### 优选策略 (Balanced)

**筛选条件**:
- alpha_pluse = 1
- 行业标准化alpha_peg < -0.0881 (前25%)
- cr_qfq > 121.17 (前25%)

**结果统计**:
- 基础层: 1,870只
- 第一层: 467只 (25.0%)
- 第二层: **90只** (2.41%)
- 筛选效率: 2.41%

**行业分布**:
| 行业 | 数量 | 占比 |
|------|------|------|
| 电子 | 22 | 24.4% |
| 电力设备 | 15 | 16.7% |
| 轻工制造 | 10 | 11.1% |
| 农林牧渔 | 6 | 6.7% |
| 通信 | 6 | 6.7% |
| 机械设备 | 5 | 5.6% |
| 基础化工 | 5 | 5.6% |
| 其他 | 4 | 4.4% |
| 传媒 | 4 | 4.4% |
| 计算机 | 4 | 4.4% |

**因子统计**:
- alpha_peg均值: -0.8198 (高性价比)
- alpha_peg中位数: -0.1720
- cr_qfq均值: 149.02 (强动量)
- cr_qfq中位数: 138.32

**前10优质个股**:
```
002715.SZ  汽车      alpha_peg=-14.49, cr_qfq=204.56
002558.SZ  传媒      alpha_peg=-0.34,  cr_qfq=248.13
002918.SZ  轻工制造  alpha_peg=-0.11,  cr_qfq=298.67
002897.SZ  通信      alpha_peg=-1.03,  cr_qfq=167.24
002815.SZ  电子      alpha_peg=-1.09,  cr_qfq=151.16
002090.SZ  电力设备  alpha_peg=-0.75,  cr_qfq=153.39
002714.SZ  农林牧渔  alpha_peg=-0.16,  cr_qfq=130.29
000603.SZ  有色金属  alpha_peg=-0.13,  cr_qfq=168.43
002892.SZ  电力设备  alpha_peg=-0.42,  cr_qfq=132.17
002861.SZ  电子      alpha_peg=-0.18,  cr_qfq=144.40
```

---

### 保守策略 (Conservative)

**筛选条件**:
- alpha_pluse = 1
- 行业标准化alpha_peg < -0.2170 (前10%)
- cr_qfq > 155.04 (前10%)

**结果统计**:
- 基础层: 1,870只
- 第一层: 181只 (9.7%)
- 第二层: **10只** (0.27%)
- 筛选效率: 0.27%

**行业分布**:
| 行业 | 数量 | 占比 |
|------|------|------|
| 电力设备 | 4 | 40.0% |
| 传媒 | 2 | 20.0% |
| 通信 | 2 | 20.0% |
| 汽车 | 1 | 10.0% |
| 机械设备 | 1 | 10.0% |

**因子统计**:
- alpha_peg均值: -1.9226 (极高性价比)
- alpha_peg中位数: -0.3996
- cr_qfq均值: 194.31 (极强动量)
- cr_qfq中位数: 185.29

**全部10只优质个股**:
```
002558.SZ  传媒      alpha_peg=-0.34,  cr_qfq=248.13
002715.SZ  汽车      alpha_peg=-14.49, cr_qfq=204.56
002897.SZ  通信      alpha_peg=-1.03,  cr_qfq=167.24
300785.SZ  传媒      alpha_peg=-0.43,  cr_qfq=176.44
301358.SZ  电力设备  alpha_peg=-0.37,  cr_qfq=189.84
603606.SH  电力设备  alpha_peg=-0.26,  cr_qfq=232.17
605389.SH  机械设备  alpha_peg=-0.35,  cr_qfq=180.74
688116.SH  电力设备  alpha_peg=-1.10,  cr_qfq=180.72
688191.SH  电力设备  alpha_peg=-0.33,  cr_qfq=166.19
688205.SZ  通信      alpha_peg=-0.52,  cr_qfq=197.10
```

---

## 📊 策略对比分析

| 指标 | 优选策略 | 保守策略 | 差异 |
|------|----------|----------|------|
| 筛选数量 | 90只 | 10只 | 9倍 |
| 筛选效率 | 2.41% | 0.27% | 8.9倍 |
| alpha_peg均值 | -0.82 | -1.92 | 更保守 |
| cr_qfq均值 | 149.02 | 194.31 | 更强势 |
| 行业分布 | 10个行业 | 5个行业 | 更分散 |
| 可投资性 | 高 | 极高 | 各有优势 |

### 策略选择建议

**优选策略适用场景**:
- ✅ 资金规模较大（需要更多标的）
- ✅ 分散化投资需求
- ✅ 平衡风险与收益
- ✅ 中长期持有

**保守策略适用场景**:
- ✅ 资金规模较小
- ✅ 追求极致质量
- ✅ 高风险偏好
- ✅ 短期交易或择时

---

## 🏭 行业洞察

### 高频行业分析

**电子行业** (优选策略22只):
- 特征: 高动量、估值分化
- 代表: 002815.SZ, 002861.SZ, 002867.SZ
- 策略: 重点关注，行业景气度高

**电力设备** (优选策略15只，保守策略4只):
- 特征: 双策略重叠，质量高
- 代表: 002090.SZ, 002892.SZ, 603606.SH
- 策略: 核心持仓行业

**传媒/通信** (保守策略占比40%):
- 特征: 极高动量
- 代表: 002558.SZ (248.13), 002897.SZ (167.24)
- 策略: 短期弹性标的

---

## ⚠️ 风险提示

### 1. 数据风险
- **cr_qfq极端值**: 最大值3140.90，可能存在异常
  - 建议: 策略中考虑Winsorize处理（如99%分位数截断）

- **alpha_peg负值**: 部分股票为负值（盈利为负）
  - 建议: 剔除dt_netprofit_yoy < 0的股票

### 2. 市场风险
- **行业集中**: 优选策略电子行业占比24.4%
  - 建议: 行业权重上限控制

- **动量反转**: cr_qfq高分位可能面临反转风险
  - 建议: 结合趋势指标确认

### 3. 策略风险
- **样本量**: 保守策略仅10只，分散不足
  - 建议: 优选策略作为主策略

- **回撤风险**: 三因子叠加可能放大波动
  - 建议: 动态仓位管理

---

## 🎯 使用建议

### 数据获取
```python
import pandas as pd

# 读取原始数据
df = pd.read_excel('results/output/multi_factor_values_20250919.xlsx')

# 读取筛选结果
balanced = pd.read_excel('results/output/multi_factor_selection_balanced_20251229_235602.xlsx')
conservative = pd.read_excel('results/output/multi_factor_selection_conservative_20251229_235602.xlsx')
comparison = pd.read_excel('results/output/multi_factor_selection_comparison_20251229_235602.xlsx')
```

### 策略优化方向
1. **动态阈值**: 根据市场环境调整分位数阈值
2. **行业轮动**: 增加行业权重动态调整
3. **止损机制**: 设置cr_qfq回撤阈值
4. **信号增强**: 结合其他因子（如RSI, MACD）

### 仓位管理
- **优选策略**: 单只股票仓位建议 1-2% (90只)
- **保守策略**: 单只股票仓位建议 5-10% (10只)
- **总仓位**: 建议不超过80%

---

## 📁 输出文件清单

### 策略执行文件
```
/home/zcy/alpha006_20251223/
├── code/
│   └── execute_multi_factor_selection.py  # 策略执行脚本
├── results/output/
│   ├── multi_factor_values_20250919.xlsx  # 原始数据（3,729只）
│   ├── multi_factor_selection_balanced_20251229_235602.xlsx  # 优选策略（90只）
│   ├── multi_factor_selection_conservative_20251229_235602.xlsx  # 保守策略（10只）
│   └── multi_factor_selection_comparison_20251229_235602.xlsx  # 策略对比
└── MULTI_FACTOR_STRATEGY_20250919.md  # 本报告
```

### 数据文件说明
| 文件名 | 记录数 | 用途 |
|--------|--------|------|
| multi_factor_values_20250919.xlsx | 3,729 | 完整数据池 |
| balanced策略 | 90 | 主选策略 |
| conservative策略 | 10 | 保守策略 |
| comparison | 100 | 两策略合并 |

---

## ✅ 策略验证总结

### 数据质量
- ✅ 核心因子完整率: 100%
- ✅ 行业覆盖: 32个申万一级行业
- ✅ Z-Score验证: 均值≈0，标准差≈1
- ✅ 因子独立性: 相关系数均<0.02

### 策略逻辑
- ✅ 三层筛选逻辑清晰
- ✅ 阈值计算科学（分位数法）
- ✅ 因子互补性强
- ✅ 可执行性强

### 结果质量
- ✅ 优选策略: 90只，覆盖10行业
- ✅ 保守策略: 10只，质量极高
- ✅ 因子统计符合预期
- ✅ 前20名股票质量优秀

---

## 📞 执行信息

**执行时间**: 2025-12-29 23:56:02
**执行环境**: WSL Ubuntu / Python 3
**数据日期**: 20250919
**策略版本**: v1.0
**状态**: ✅ 完成

---

## 🔖 附录

### A. 因子计算公式
```
alpha_pluse = 1  if  2 ≤ count_20d(volumes in [1.4×, 3.5× 14d_mean]) ≤ 4
              0  otherwise

alpha_peg_raw = pe_ttm / dt_netprofit_yoy

行业标准化alpha_peg = (alpha_peg_raw - 行业均值) / 行业标准差

cr_qfq = 来自stk_factor_pro表，N=20，前复权
```

### B. 阈值计算公式
```
peg_25 = df['行业标准化alpha_peg'].quantile(0.25)
peg_10 = df['行业标准化alpha_peg'].quantile(0.10)
cr_25 = df['cr_qfq'].quantile(0.75)  # 前25% > 75分位
cr_10 = df['cr_qfq'].quantile(0.90)  # 前10% > 90分位
```

### C. 筛选效率计算
```
优选策略效率 = 90 / 3,729 = 2.41%
保守策略效率 = 10 / 3,729 = 0.27%
```

---

**报告生成**: 2025-12-29 23:56
**生成工具**: Python + Pandas + Excel
**版本**: v1.0
**状态**: ✅ 完成
